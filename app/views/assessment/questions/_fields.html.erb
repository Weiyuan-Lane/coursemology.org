<table class="table assignments missions-list-table">
    <thead>
	    <tr>
	    	<th width="50%">Question</th>
	    	<th width="30%">Tags</th>
	    	<th width="10%">Level</th>
	    	<%- if !@assessment.nil? %>
	    	<th width="10%">Action</th>
	    	<%- else%>
	    	<th width="10%">Add</th>
	    	<%- end %>
		</tr>
    </thead>

    <tbody class="table-hover">
    	<% @questions.each do |q| %>
	        <tr id="row-<%= q.id %>">	          
	        	<td><%= q.title %></td>
	        	<td>
	              	<% q.topicconcepts.uniq.each do |tag| %>
	                    <a>
	                        <span class="label label-info"><%= tag.name %></span>
	                    </a>
	                <% end %>
	                <% diffg = @course.tag_groups.where(:name => 'Difficulty')%>
	                <% diffs = diffg.count > 0 ? diffg[0].tags : nil %>
	                <% (q.tags.uniq - diffs).each do |tag| %>
	                    <%= link_to course_tag_path(@course, tag) do %>
	                        <span class="label label-info"><%= tag.name %></span>
	                    <% end %>
	                <% end %>
	            </td>
	            <td>
	            	<% diff = q.tags.uniq & diffs%>
	            	<% if (!diff.nil? && !diff[0].nil?) %>
	            		<a><span class="label label-info label-green"><%= diff[0].name %></span></a>
	            	<% end %>
	           	</td>
	            <td>
	            	<%- if @assessment.nil? %>
		                <%= link_to polymorphic_path([@course, q.as_question], action: :edit), class: 'btn' do %>
	                        <i class="icon-edit"></i>
	                    <% end %>
	                    <%= link_to url_for([@course, q.as_question]),
	                                method: :delete,
	                                data: { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => "Are you sure to delete 'Question #{q.title}'?")) },
	                                class: 'btn btn-danger' do %>
	                        <i class="icon-trash"></i>
	                    <% end %>
	                <% else %>
	                	<%= check_box_tag 'question_#{q.id}', q.id, @assessment.questions.include?(q), :name => 'assessment[question_assessments][]' %>
                    <% end %>             
			
	            </td>
	        </tr>
	    <% end %>
    </tbody>
</table>
	<%- if !@assessment.nil? %>
		<div class="form-action">
		<%= fi.submit "update", :class => 'btn btn-primary form-submit' %>
		<%= link_to t('.cancel', :default => t("helpers.links.cancel")), :back, :class => 'btn' %>
		</div>
	<% end %>